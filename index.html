<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="一个程序员的个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="SoloQ">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="SoloQ">
<meta property="og:description" content="一个程序员的个人博客">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Jichen Xu">
<meta property="article:tag" content="programming, computer science， IT， 信息技术， 编程">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>SoloQ</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --></head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SoloQ</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/07/LeetCode%203.%20Longest%20Substring%20Without%20Repeating%20Characters/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/07/LeetCode%203.%20Longest%20Substring%20Without%20Repeating%20Characters/" class="post-title-link" itemprop="url">LeetCode 3. Longest Substring Without Repeating Characters</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-07 17:00:00 / Modified: 21:30:32" itemprop="dateCreated datePublished" datetime="2021-01-07T17:00:00+09:00">2021-01-07</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/longest-substring-without-repeating-characters/">原题在此</a><br>Given a string <code>s</code>, find the length of the <code>longest substring</code> without repeating characters.</p>
<p><strong>Example 1:</strong><br>Input: s = “abcabcbb”<br>Output: 3<br>Explanation: The answer is “abc”, with the length of 3.</p>
<p><strong>Example 2:</strong><br>Input: s = “bbbbb”<br>Output: 1<br>Explanation: The answer is “b”, with the length of 1.</p>
<p><strong>Example 3:</strong><br>Input: s = “pwwkew”<br>Output: 3<br>Explanation: The answer is “wke”, with the length of 3.<br>Notice that the answer must be a substring, “pwke” is a subsequence and not a substring.</p>
<p><strong>Example 4:</strong><br>Input: s = “”<br>Output: 0</p>
<p><strong>Constraints:</strong></p>
<ul>
<li>0 &lt;= s.length &lt;= 5 * 104</li>
<li>s consists of English letters, digits, symbols and spaces.</li>
</ul>
<h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><p>用<code>map&lt;char, int&gt;</code>储存每个字符最后出现的index。采用”滑动窗口”法, 指向子串尾端的指针持续扫描整个字符串,在遇到重复时将更新首指针指向重复字符的下一个。记录（更新）每个字符最后出现的index。</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(<span class="built_in">string</span> s)</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">m</span><span class="params">(<span class="number">256</span>, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, idx = <span class="number">-1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; s.size(); ++i)&#123;</span><br><span class="line">            <span class="keyword">if</span>(m[s[i]] &gt; idx) idx = m[s[i]];</span><br><span class="line">            m[s[i]] = i;</span><br><span class="line">            res = max(res, i - idx);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(s <span class="keyword">string</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">	m := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="keyword">rune</span>]<span class="keyword">int</span>)</span><br><span class="line">    <span class="keyword">var</span> res, idx = <span class="number">-1</span>, <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i,r := <span class="keyword">range</span> s&#123;</span><br><span class="line">		<span class="keyword">if</span> m[r] &gt; idx &#123;</span><br><span class="line">			idx = m[r]</span><br><span class="line">		&#125;</span><br><span class="line">        m[r] = i</span><br><span class="line">        <span class="keyword">if</span>(i - idx &gt; res) &#123;</span><br><span class="line">            res = i - idx</span><br><span class="line">		&#125;</span><br><span class="line">        m[r]++;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> res + <span class="number">1</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/06/DDIA%20Ch-01/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/06/DDIA%20Ch-01/" class="post-title-link" itemprop="url">DDIA Chapter 01 可靠性,可拓展性,可维护性</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-06 19:00:00" itemprop="dateCreated datePublished" datetime="2021-01-06T19:00:00+09:00">2021-01-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-07 22:17:15" itemprop="dateModified" datetime="2021-01-07T22:17:15+09:00">2021-01-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" itemprop="url" rel="index">
                    <span itemprop="name">读书笔记</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="引"><a href="#引" class="headerlink" title="引"></a>引</h2><p>本章关键字：可靠、可拓展、可维护（的数据系统）。澄清它们的定义，概述考量这些目标的方法。<br>当今， <strong>数据密集型（data-intensive）</strong> 应用多于 <strong>计算密集型（compute-intensive）</strong> 应用。CPU很少成为瓶颈，问题通常来自数据量、数据复杂性、以及数据的变更速度。</p>
<p>一些耳熟能详的组件：</p>
<ul>
<li>存储数据，以便自己或其他应用程序之后能再次找到 （<strong><em>数据库（database）</em></strong>）</li>
<li>记住开销昂贵操作的结果，加快读取速度（<strong><em>缓存（cache）</em></strong>）</li>
<li>允许用户按关键字搜索数据，或以各种方式对数据进行过滤（<strong><em>搜索索引（search indexes）</em></strong>）</li>
<li>向其他进程发送消息，进行异步处理（<strong><em>流处理（stream processing）</em></strong>）</li>
<li>定期处理累积的大批量数据（<strong><em>批处理（batch processing）</em></strong>）</li>
</ul>
<p>大型应用程序有着各种严格而广泛的要求。这些数据存储工具与数据处理工具，它们针对不同应用场景进行优化，单个工具不足以满足所有的数据处理和存储需求。总体工作被拆分成一系列能被单个工具高效完成的任务，并通过应用代码将它们缝合起来。</p>
<p>在尝试将多个工具组合在一起提供服务时，设计者会重点讨论三个在大多数软件系统中都很重要的问题：</p>
<p><strong><em>可靠性（Reliability）</em></strong></p>
<p>​    系统在<strong>困境（adversity）</strong>（硬件故障、软件故障、人为错误）中仍可正常工作（正确完成功能，并能达到期望的性能水准）。</p>
<p><strong><em>可拓展性（Scalability）</em></strong></p>
<p>​    有合理的办法应对系统的增长（数据量、流量、复杂性）</p>
<p><strong><em>可维护性（Maintainability）</em></strong></p>
<p>​    许多不同的人（工程师、运维）在不同的生命周期，都能高效地在系统上工作（使系统保持现有行为，并适应新的应用场景）。</p>
<h2 id="可靠性"><a href="#可靠性" class="headerlink" title="可靠性"></a>可靠性</h2><p>可以把可靠性粗略理解为“即使出现问题，也能继续正确工作”。<br>造成错误的原因叫做<strong>故障（fault）</strong>，能预料并应对故障的系统特性可称为<strong>容错（fault-tolerant）</strong><br><strong>故障（fault）</strong>不同于<strong>失效（failure）</strong>。<strong>故障</strong>通常定义为系统的一部分状态偏离其标准，而<strong>失效</strong>则是系统作为一个整体停止向用户提供服务。好的容错机制设计防止因<strong>故障</strong>而导致<strong>失效</strong>。</p>
<h3 id="硬件故障"><a href="#硬件故障" class="headerlink" title="硬件故障"></a>硬件故障</h3><p>由众多机器组成的分布式系统中，硬件异常不再”异常”。硬件故障是随机的、相互独立的。通过增加单个硬件的冗余度来解决硬件异常可能带来的问题。<br>在硬件冗余的基础上引入软件容错，那么系统在容忍整个（单台）机器故障的道路上就更进一步了。运维上也有便利，例如：如果需要重启机器（例如应用操作系统安全补丁），单服务器系统就需要计划停机。而允许机器失效的系统则可以一次修复一个节点，无需整个系统停机。</p>
<h3 id="软件错误"><a href="#软件错误" class="headerlink" title="软件错误"></a>软件错误</h3><p>另一类错误是内部的<strong>系统性错误（systematic error）</strong>。这类错误难以预料，而且因为是跨节点相关的，所以比起不相关的硬件故障往往可能造成更多的<strong>系统失效</strong>。<br>软件BUG通常会潜伏很长时间，况意味着软件对其环境做出了某种假设——虽然这种假设通常来说是正确的，但由于某种原因最后不再成立了。<br>对策：</p>
<ul>
<li>仔细考虑系统中的假设和交互；</li>
<li>彻底的测试。</li>
<li>进程隔离，允许进程崩溃并重启。</li>
<li>测量、监控并分析生产环境中的系统行为。如果系统能够提供一些保证（例如在一个消息队列中，进入与发出的消息数量相等），那么系统就可以在运行时不断自检，并在出现差异（discrepancy） 时报警。</li>
</ul>
<h3 id="人为错误"><a href="#人为错误" class="headerlink" title="人为错误"></a>人为错误</h3><p>人类不可靠。<br>对策：</p>
<ul>
<li>以最小化犯错机会的方式设计系统。</li>
<li>将人们最容易犯错的地方与可能导致失效的地方<strong>解耦（decouple）</strong>。<strong>沙箱（sandbox）</strong>。</li>
<li>在各个层次进行彻底的测试。</li>
<li>允许从人为错误中简单快速地恢复，以最大限度地减少失效情况带来的影响。 如快速回滚，分批发布。</li>
<li>配置详细和明确的监控，及时发现和日后分析问题。</li>
<li>良好的管理实践与充分的培训——一个复杂而重要的方面，但超出了本书的范围。</li>
</ul>
<h2 id="可拓展性"><a href="#可拓展性" class="headerlink" title="可拓展性"></a>可拓展性</h2><p><strong>可拓展性（Scalability）</strong> 是用来描述系统应对负载增长能力的术语。讨论可拓展性意味着考虑诸如“如果系统以特定方式增长，有什么选项可以应对增长？”和“如何增加计算资源来处理额外的负载？”等问题。</p>
<h3 id="描述负载"><a href="#描述负载" class="headerlink" title="描述负载"></a>描述负载</h3><p>描述负载的参数的最佳选择取决于系统架构，它可能是每秒向Web服务器发出的请求、数据库中的读写比率、聊天室中同时活跃的用户数量、缓存命中率或其他东西。</p>
<h3 id="描述性能"><a href="#描述性能" class="headerlink" title="描述性能"></a>描述性能</h3><p>系统负载参数定义好后，就可以研究当负载增加会发生什么。两种角度：</p>
<ul>
<li>增加负载参数并保持系统资源（CPU、内存、网络带宽等）不变时，系统性能将受到什么影响？</li>
<li>增加负载参数并希望保持性能不变时，需要增加多少系统资源？</li>
</ul>
<p>如何描述性能(例)：</p>
<ul>
<li>批处理系统：重要的是<strong>吞吐量（throughput）</strong></li>
<li>在线系统：重要的是服务的<strong>响应时间（response time）</strong><blockquote>
<h4 id="延迟和响应时间"><a href="#延迟和响应时间" class="headerlink" title="延迟和响应时间"></a>延迟和响应时间</h4><p><strong>延迟（latency）</strong> 和 <strong>响应时间（response time）</strong> 经常用作同义词，但实际上它们并不一样。响应时间是客户所看到的，除了实际处理请求的时间（ <strong>服务时间（service time）</strong> ）之外，还包括网络延迟和排队延迟。延迟是某个请求等待处理的<strong>持续时长</strong>，在此期间它处于 <strong>休眠（latent）</strong> 状态，并等待服务。</p>
</blockquote>
</li>
</ul>
<p>单次服务的响应时间总会有差异，所以需要观测多次服务结果的<strong>分布（distribution）</strong>。<br>比起算数平均值，中位数有更好的说服力（或与中位数类似的，90%以上的请求可以在x毫秒之内响应）。<br>实践中，一个请求往往需要多个后端调用，如果其中一个响应较慢便会拖累整个请求的响应时间。</p>
<h3 id="应对负载"><a href="#应对负载" class="headerlink" title="应对负载"></a>应对负载</h3><p><strong>垂直拓展（vertical scaling）</strong>：转向更强大的机器<br><strong>水平拓展（horizontal scaling）</strong>：将负载分布到多台小机器上<br>如果负载<strong>极难预测（highly unpredictable）</strong>，则检测到负载增加时自动增加计算资源的<strong>弹性（elastic）</strong>系统可能很有用<br>围绕<strong>假设（assumption）</strong> 建立良好的可拓展架构</p>
<h2 id="可维护性"><a href="#可维护性" class="headerlink" title="可维护性"></a>可维护性</h2><p>系统更新，代码会不再符合新的需求；人员更替，知识会流失。</p>
<p><strong><em>可操作性（Operability）</em></strong></p>
<p>​    便于运维团队保持系统平稳运行。</p>
<p><strong><em>简单性（Simplicity）</em></strong></p>
<p>​    消除尽可能多的<strong>复杂度（complexity）</strong>，使新工程师易学。（和用户接口的简单性不一样。）</p>
<p><strong><em>可演化性（evolability）</em></strong></p>
<p>​    使工程师在未来能轻松地对系统进行更改，当需求变化时为新应用场景做适配。也称为<strong>可拓展性（extensibility）</strong>，<strong>可修改性（modifiability）</strong>或<strong>可塑性（plasticity）</strong>。<br>   （extensibility是业务逻辑，服务范围方面的拓展性；Scalability是增加算力增加储存空间等性能方面的拓展性）</p>
<h3 id="Developer-Happiness"><a href="#Developer-Happiness" class="headerlink" title="Developer Happiness"></a>Developer Happiness</h3><p>运维职责包括但不限：</p>
<ul>
<li>监控系统的运行状况，并在服务状态不佳时快速恢复服务</li>
<li>跟踪问题的原因，例如系统故障或性能下降</li>
<li>及时更新软件和平台，比如安全补丁</li>
<li>了解系统间的相互作用，以便在异常变更造成损失前进行规避。</li>
<li>预测未来的问题，并在问题出现之前加以解决（例如，容量规划）</li>
<li>建立部署，配置、管理方面的良好实践，编写相应工具</li>
<li>执行复杂的维护任务，例如将应用程序从一个平台迁移到另一个平台</li>
<li>当配置变更时，维持系统的安全性</li>
<li>定义工作流程，使运维操作可预测，并保持生产环境稳定。</li>
<li>铁打的营盘流水的兵，维持组织对系统的了解。</li>
</ul>
<p>实现幸福的方式：</p>
<ul>
<li>通过良好的监控，提供对系统内部状态和运行时行为的<strong>可见性（visibility）</strong></li>
<li>为自动化提供良好支持，将系统与标准化工具相集成</li>
<li>避免依赖单台机器（在整个系统继续不间断运行的情况下允许机器停机维护）</li>
<li>提供良好的文档和易于理解的操作模型（“如果做X，会发生Y”）</li>
<li>提供良好的默认行为，但需要时也允许管理员自由覆盖默认值</li>
<li>有条件时进行自我修复，但需要时也允许管理员手动控制系统状态</li>
<li>行为可预测，最大限度减少意外</li>
</ul>
<p><strong>用抽象消除额外复杂度</strong>，当状态空间激增、模块间紧密耦合、纠结的依赖关系、不一致的命名和术语、解决性能问题的Hack、需要绕开的特例等使复杂度激增的情况发生时。<br><strong>可演化性（evolvability）</strong>，系统不会一成不变，为添加各种奇怪的需求做好准备。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/06/LeetCode%201539.%20Kth%20Missing%20Positive%20Number/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/06/LeetCode%201539.%20Kth%20Missing%20Positive%20Number/" class="post-title-link" itemprop="url">LeetCode 1539. Kth Missing Positive Number</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-06 17:00:00 / Modified: 18:46:14" itemprop="dateCreated datePublished" datetime="2021-01-06T17:00:00+09:00">2021-01-06</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/kth-missing-positive-number/">原题在此</a><br>Given an array arr of positive integers sorted in a strictly increasing order, and an integer <code>k</code>.<br>Find the kth positive integer that is missing from this array.</p>
<p><strong>Example 1:</strong><br>Input: arr = [2,3,4,7,11], k = 5<br>Output: 9<br>Explanation: The missing positive integers are [1,5,6,8,9,10,12,13,…]. The 5th missing positive integer is 9.</p>
<p><strong>Example 2:</strong><br>Input: arr = [1,2,3,4], k = 2<br>Output: 6<br>Explanation: The missing positive integers are [5,6,7,…]. The 2nd missing positive integer is 6.</p>
<p><strong>Constraints:</strong></p>
<ul>
<li>1 &lt;= arr.length &lt;= 1000</li>
<li>1 &lt;= arr[i] &lt;= 1000</li>
<li>1 &lt;= k &lt;= 1000</li>
<li>arr[i] &lt; arr[j] for 1 &lt;= i &lt; j &lt;= arr.length</li>
</ul>
<h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><p>如果是一个没有missing数的数组,此时<code>arr[i] == i + 1</code>.<br>也就是说在一个missing了一些数的数组中,到下标<code>i</code>为止missing的个数为<code>arr[i] - (i+1)</code>.<br>这个等式对于数组任意下标<code>i</code>都成立,所以可以用二分查找法快速检索.<br>当循环结束时 <code>l == r</code>,返回 <code>l + k</code> 即可.</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findKthPositive</span><span class="params">(arr []<span class="keyword">int</span>, k <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">    <span class="keyword">var</span> l, r, m <span class="keyword">int</span> = <span class="number">0</span>, <span class="built_in">len</span>(arr), <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> l &lt; r &#123;</span><br><span class="line">        m = (l + r) / <span class="number">2</span></span><br><span class="line">        <span class="keyword">if</span>(arr[m] - m - <span class="number">1</span> &lt; k) &#123;</span><br><span class="line">            l = m + <span class="number">1</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r = m</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> l + k</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/05/Go%20Channel/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/05/Go%20Channel/" class="post-title-link" itemprop="url">Untitled</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 21:21:23" itemprop="dateCreated datePublished" datetime="2021-01-05T21:21:23+09:00">2021-01-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/05/LeetCode%2082.%20Remove%20Duplicates%20from%20Sorted%20List%20II/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/05/LeetCode%2082.%20Remove%20Duplicates%20from%20Sorted%20List%20II/" class="post-title-link" itemprop="url">LeetCode 82. Remove Duplicates from Sorted List II</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-05 17:00:00" itemprop="dateCreated datePublished" datetime="2021-01-05T17:00:00+09:00">2021-01-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-06 18:32:52" itemprop="dateModified" datetime="2021-01-06T18:32:52+09:00">2021-01-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/remove-duplicates-from-sorted-list-ii/">原题在此</a><br>Given the head of a sorted linked list, delete all nodes that have duplicate numbers, leaving only distinct numbers from the original list. Return the linked list sorted as well.</p>
<p><strong>Example 1:</strong><br><img src="https://assets.leetcode.com/uploads/2021/01/04/linkedlist1.jpg" alt=""><br>Input: head = [1,2,3,3,4,4,5]<br>Output: [1,2,5]</p>
<p><strong>Example 2:</strong><br><img src="https://assets.leetcode.com/uploads/2021/01/04/linkedlist2.jpg" alt=""><br>Input: head = [1,1,1,2,3]<br>Output: [2,3]</p>
<p><strong>Constraints:</strong></p>
<ul>
<li>The number of nodes in the list is in the range [0, 300].</li>
<li>-100 &lt;= Node.val &lt;= 100</li>
<li>The list is guaranteed to be sorted in ascending order.</li>
</ul>
<h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><ol>
<li>与Remove Duplicates from Sorted List I不同之处在于,这次要将重复值一个不留完全移除.</li>
<li>有head的值会重复的情况,所以<code>new</code>一个值与head不一样的dummy指向head;</li>
<li>声明两个指针, p1指向dummy, p2指向head;</li>
<li>当p2不为空时,<ol>
<li>当p2有next且next的值和p2相等时,p2指向next;</li>
<li>此时有两种情况,p1和p2挨着,两个指针分别指向自己的next. 否则p2指向自己的next,p1指向p2.此时便跳过了重复的值<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode() : val(0), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(nullptr) &#123;&#125;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x, ListNode *next) : val(x), next(next) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">deleteDuplicates</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!head) <span class="keyword">return</span> head;</span><br><span class="line">        <span class="function">ListNode <span class="title">dummy</span><span class="params">(head-&gt;val + <span class="number">1</span>, head)</span></span>;</span><br><span class="line">        ListNode* p1 = &amp;dummy, *p2 = head;</span><br><span class="line">        <span class="keyword">while</span>(p2) &#123;</span><br><span class="line">            <span class="keyword">while</span>(p2 -&gt; next &amp;&amp; p2 -&gt; val == p2 -&gt; next -&gt; val) &#123;</span><br><span class="line">                p2 = p2 -&gt; next;</span><br><span class="line">            &#125; </span><br><span class="line">            <span class="keyword">if</span>(p1 -&gt; next == p2) &#123;</span><br><span class="line">                p1 = p2;</span><br><span class="line">                p2 = p2 -&gt; next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                p2 = p2 -&gt; next;</span><br><span class="line">                p1 -&gt; next = p2;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dummy.next;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/04/LeetCode%2021.%20Merge%20Two%20Sorted%20Lists/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/04/LeetCode%2021.%20Merge%20Two%20Sorted%20Lists/" class="post-title-link" itemprop="url">LeetCode 21. Merge Two Sorted Lists</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-04 17:00:00 / Modified: 20:55:55" itemprop="dateCreated datePublished" datetime="2021-01-04T17:00:00+09:00">2021-01-04</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/merge-two-sorted-lists/">原题在此</a><br>Merge two sorted linked lists and return it as a sorted list. The list should be made by splicing together the nodes of the first two lists.<br><strong>Example 1:</strong><br>Input: l1 = [1,2,4], l2 = [1,3,4]<br>Output: [1,1,2,3,4,4]</p>
<p><strong>Example 2:</strong><br>Input: l1 = [], l2 = []<br>Output: []</p>
<p><strong>Example 3:</strong><br>Input: l1 = [], l2 = [0]<br>Output: [0]</p>
<p><strong>Constraints:</strong></p>
<ul>
<li>The number of nodes in both lists is in the range [0, 50].</li>
<li>-100 &lt;= Node.val &lt;= 100</li>
<li>Both l1 and l2 are sorted in non-decreasing order.</li>
</ul>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><p>当l1, l2均未遍历完时,依次链接值较小的node.之后将剩余的list全部接上.<br>非常简单的一道题,适合拿来练手一门不熟悉的语言.</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Definition for singly-linked list.</span></span><br><span class="line"><span class="comment"> * struct ListNode &#123;</span></span><br><span class="line"><span class="comment"> *     int val;</span></span><br><span class="line"><span class="comment"> *     ListNode *next;</span></span><br><span class="line"><span class="comment"> *     ListNode(int x) : val(x), next(NULL) &#123;&#125;</span></span><br><span class="line"><span class="comment"> * &#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">ListNode* <span class="title">mergeTwoLists</span><span class="params">(ListNode* l1, ListNode* l2)</span> </span>&#123;</span><br><span class="line">        <span class="function">ListNode <span class="title">head</span><span class="params">(INT_MIN)</span></span>;</span><br><span class="line">        ListNode* foo = &amp;head;</span><br><span class="line">        <span class="keyword">while</span>(l1 &amp;&amp; l2) &#123;</span><br><span class="line">            <span class="keyword">if</span>(l1 -&gt; val &lt; l2 -&gt; val) &#123;</span><br><span class="line">                foo -&gt; next = l1;</span><br><span class="line">                foo = foo -&gt; next;</span><br><span class="line">                l1 = l1 -&gt; next;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                foo -&gt; next = l2;</span><br><span class="line">                foo = foo -&gt; next;</span><br><span class="line">                l2 = l2 -&gt; next;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span>(l1) &#123;</span><br><span class="line">            foo -&gt; next = l1;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            foo -&gt; next = l2;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> head.next;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/02/LeetCode%201379.%20Find%20a%20Corresponding%20Node%20of%20a%20Binary%20Tree%20in%20a%20Clone%20of%20That%20Tree/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/02/LeetCode%201379.%20Find%20a%20Corresponding%20Node%20of%20a%20Binary%20Tree%20in%20a%20Clone%20of%20That%20Tree/" class="post-title-link" itemprop="url">1379. Find a Corresponding Node of a Binary Tree in a Clone of That Tree</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-01-02 17:00:00 / Modified: 19:19:50" itemprop="dateCreated datePublished" datetime="2021-01-02T17:00:00+09:00">2021-01-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/find-a-corresponding-node-of-a-binary-tree-in-a-clone-of-that-tree/">原题在此</a></p>
<h1 id="解析"><a href="#解析" class="headerlink" title="解析"></a>解析</h1><p>点踩比点赞多的一道题,配不上中等难度.你可以用任意方式遍历二叉树直到找到target为止.</p>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function">TreeNode* <span class="title">getTargetCopy</span><span class="params">(TreeNode* original, TreeNode* cloned, TreeNode* target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(original == target || original == <span class="literal">NULL</span>) <span class="keyword">return</span> cloned;</span><br><span class="line">        TreeNode *t = getTargetCopy(original -&gt; left, cloned -&gt; left, target);</span><br><span class="line">        <span class="keyword">if</span>(t == <span class="literal">NULL</span>) t = getTargetCopy(original -&gt; right, cloned -&gt; right, target);</span><br><span class="line">        <span class="keyword">return</span> t;        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/01/01/LeetCode%201640.%20Check%20Array%20Formation%20Through%20Concatenation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/01/01/LeetCode%201640.%20Check%20Array%20Formation%20Through%20Concatenation/" class="post-title-link" itemprop="url">LeetCode 1640. Check Array Formation Through Concatenation</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-01-01 19:00:00" itemprop="dateCreated datePublished" datetime="2021-01-01T19:00:00+09:00">2021-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-03 17:07:12" itemprop="dateModified" datetime="2021-01-03T17:07:12+09:00">2021-01-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/check-array-formation-through-concatenation/">原题在此</a><br>You are given an array of <strong>distinct</strong> integers <code>arr</code> and an array of integer arrays <code>pieces</code>, where the integers in <code>pieces</code> are <strong>distinct</strong>. Your goal is to form <code>arr</code> by concatenating the arrays in <code>pieces</code> <strong>in any order</strong>. However, you are <strong>not allowed</strong> to reorder the integers in each array <code>pieces[i]</code>.<br>Return <code>true</code> if it is possible to form the array <code>arr</code> from <code>pieces</code>. Otherwise, return <code>false</code>.</p>
<p><strong>Example 1:</strong></p>
<blockquote>
<p>Input: arr = [85], pieces = [[85]]<br>Output: true</p>
</blockquote>
<p><strong>Example 2:</strong></p>
<blockquote>
<p>Input: arr = [15,88], pieces = [[88],[15]]<br>Output: true<br>Explanation: Concatenate [15] then [88]</p>
</blockquote>
<p><strong>Example 3:</strong></p>
<blockquote>
<p>Input: arr = [49,18,16], pieces = [[16,18,49]]<br>Output: false<br>Explanation: Even though the numbers match, we cannot reorder pieces[0].</p>
</blockquote>
<p><strong>Example 4:</strong></p>
<blockquote>
<p>Input: arr = [91,4,64,78], pieces = [[78],[4,64],[91]]<br>Output: true<br>Explanation: Concatenate [91] then [4,64] then [78]</p>
</blockquote>
<p><strong>Example 5:</strong></p>
<blockquote>
<p>Input: arr = [1,3,5,7], pieces = [[2,4,6,8]]<br>Output: false</p>
</blockquote>
<p><strong>Constraints:</strong></p>
<ul>
<li>1 &lt;= pieces.length &lt;= arr.length &lt;= 100</li>
<li>sum(pieces[i].length) == arr.length</li>
<li>1 &lt;= pieces[i].length &lt;= arr.length</li>
<li>1 &lt;= arr[i], pieces[i][j] &lt;= 100</li>
<li>The integers in arr are distinct.</li>
<li>The integers in pieces are distinct (i.e., If we flatten pieces in a 1D array, all the integers in this array are distinct).</li>
</ul>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="版本一"><a href="#版本一" class="headerlink" title="版本一"></a>版本一</h2><p>这一版的思路很单纯,把<code>pieces</code>中的每个<code>piece</code>以<code>piece[0]</code>为key存入map中以便随机访问,再无脑按照<code>arr</code>中出现的顺序拼起来.最后看看拼起来的和<code>arr</code>是否相等.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canFormArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; pieces)</span> </span>&#123;</span><br><span class="line">        <span class="built_in">unordered_map</span>&lt;<span class="keyword">int</span>, <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt; mp;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; attached;</span><br><span class="line">        <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; p : pieces) mp[p[<span class="number">0</span>]] = p;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i : arr)</span><br><span class="line">            <span class="keyword">if</span> (mp.find(i) != mp.end())</span><br><span class="line">                attached.insert(attached.end(), mp[i].begin(), mp[i].end());</span><br><span class="line">        <span class="keyword">return</span> attached == arr;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<h2 id="改进思路"><a href="#改进思路" class="headerlink" title="改进思路"></a>改进思路</h2><ol>
<li>Map中没必要存整个<code>piece</code>数组,存<code>piece[0]</code>就可以.</li>
<li>根据题目<strong>Constraints</strong>部分的描述,外加数组元素是<strong>distinct</strong>的,可以用数组替代Map.</li>
<li>在遍历<code>arr</code>的过程中,每次必须找到一个<code>piece</code>以<code>arr[i]</code>开头,且整段<code>piece</code>和<code>arr</code>的局部必须完全一致,否则即可返回<code>false</code>.</li>
</ol>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">canFormArray</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; arr, <span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; pieces)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// mp&lt;&quot;first number of a piece&quot;, &quot;index of this piece in pieces&quot;&gt;</span></span><br><span class="line">        <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">mp</span><span class="params">(<span class="number">101</span>, <span class="number">-1</span>)</span></span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pieces.size(); ++i) mp[pieces[i][<span class="number">0</span>]] = i;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.size();) &#123;</span><br><span class="line">            <span class="keyword">int</span> pindex = mp[arr[i]];</span><br><span class="line">            <span class="keyword">if</span>(pindex == <span class="number">-1</span>) <span class="keyword">return</span> <span class="literal">false</span>; <span class="comment">// no piece start with this number;</span></span><br><span class="line">            <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span>(j &lt; pieces[pindex].size())</span><br><span class="line">                <span class="keyword">if</span>(arr[i++] != pieces[pindex][j++]) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/31/LeetCode%2084.%20Largest%20Rectangle%20in%20Histogram/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/31/LeetCode%2084.%20Largest%20Rectangle%20in%20Histogram/" class="post-title-link" itemprop="url">LeetCode 84. Largest Rectangle in Histogram</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-31 17:00:00" itemprop="dateCreated datePublished" datetime="2020-12-31T17:00:00+09:00">2020-12-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-04 21:02:19" itemprop="dateModified" datetime="2021-01-04T21:02:19+09:00">2021-01-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/largest-rectangle-in-histogram/">题目链接</a><br>Given n non-negative integers representing the histogram’s bar height where the width of each bar is 1, find the area of largest rectangle in the histogram.<br><img src="https://assets.leetcode.com/uploads/2018/10/12/histogram.png" alt=""><br>Above is a histogram where width of each bar is 1, given height = [2,1,5,6,2,3].<br><img src="https://assets.leetcode.com/uploads/2018/10/12/histogram_area.png" alt=""><br>The largest rectangle is shown in the shaded area, which has area = 10 unit.<br><strong>Example:</strong></p>
<blockquote>
<p>Input: [2,1,5,6,2,3]<br>Output: 10</p>
</blockquote>
<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1><h2 id="暴力搜索"><a href="#暴力搜索" class="headerlink" title="暴力搜索"></a>暴力搜索</h2><p>依次取区间<code>arr(i..j)</code>,用<code>min(arr(i..j)) * j - i</code>可以遍历所有可能的长方形,从中选取最大的即可.此时时间复杂度为$O(N^2)$.<br>观察暴力解法发现:</p>
<ol>
<li>最大面积的长方形长度必然和数组中的某个元素的值相等.即在数组中只有<code>arr.length</code>个候选最大长方形.此时我们要设法确定每个元素高度的长方形的宽度.</li>
<li>暴力搜索的过程没有做任何记录,每次搜索对下一次没有任何帮助,可以设法记录有效信息简化搜索过程.即空间换时间.</li>
<li>输入数组元素均为非负整数,在数组两侧各添加一个0不改变最终结果<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Sentinel_value">(哨兵,Sentinel)</a>.如此可省略处理edge case的部分,简化代码.</li>
</ol>
<h2 id="算法改进"><a href="#算法改进" class="headerlink" title="算法改进"></a>算法改进</h2><p>在当前元素严格小于上一个元素时,便决定了此前某些元素的宽度无法再拓展了.此时以当前下标为右界,上一个元素的下标为左界,便可确定以此元素为高的矩形的宽度.<br>我们可以用栈存下标.就拿例题来说,左侧<strong>哨兵</strong>下标<code>i=-1</code>,循环前先入栈.</p>
<ol>
<li><code>i = 0,a[i] = 2</code> 还有继续向右拓宽的可能,下标入栈.</li>
<li><code>i = 1,a[i] = 1</code> 此时:<ol>
<li>栈尾元素<code>a[s.back()]</code>,即下标为0的元素2大于当前元素.高度为2的长方形无法再拓宽,退栈处理.宽度为当前下标1减去退栈后的栈尾元素下标此时为哨兵-1再减去1,即<code>width = i - s.back() - 1; area = width * height;</code>.</li>
<li>再次检查栈尾,发现哨兵高度为0还有拓宽可能,不做处理(这样可能更好理解一些,实际情况是栈内只剩下哨兵,不做处理.再第四步还有一次演示).</li>
<li>当前下标元素也有拓宽可能,下标入栈.</li>
</ol>
</li>
<li><code>i = 2,a[i] = 5;i = 3,a[i] = 6</code> 还有继续向右拓宽的可能,入栈.</li>
<li><code>i = 4,a[i] = 2</code> 与第二步做相似处理,先后确定了以6和以5为高度的长方形的面积.在6,5分别退栈后访问到<code>a[1]</code>,发现当前下标元素不小于<code>a[1]</code>.即栈内所有元素均还有拓宽可能,故不作处理.当前下标也入栈.</li>
<li><code>i = 5,a[i] = 3</code> 还有继续向右拓宽的可能,入栈. <strong>再次强调哨兵</strong></li>
<li><code>i = 6,a[i] = 0</code> 元素访问完毕,下标来到哨兵,此时栈内除了另一个哨兵外元素全部大于哨兵.对栈内元素依次退栈计算面积,直到栈内只剩下哨兵为止.</li>
</ol>
<ul>
<li>绿色:宽度还有可能变长,入栈. 红色:宽度无法拓展,出栈计算面积. 虚线:以此元素为高度的长方形面积已确定. (要想象首尾各有一个0)  <img src="/2020/12/31/LeetCode%2084.%20Largest%20Rectangle%20in%20Histogram/step.gif" class="">
</li>
</ul>
<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">largestRectangleArea</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&amp; heights)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="built_in">stack</span>;</span><br><span class="line">        heights.push_back(<span class="number">0</span>);</span><br><span class="line">        <span class="built_in">stack</span>.push_back(<span class="number">-1</span>);</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; heights.size(); ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span>(<span class="built_in">stack</span>.size() &gt; <span class="number">1</span> &amp;&amp; heights[<span class="built_in">stack</span>.back()] &gt;= heights[i]) &#123;</span><br><span class="line">                <span class="keyword">int</span> h = heights[<span class="built_in">stack</span>.back()];</span><br><span class="line">                <span class="built_in">stack</span>.pop_back();</span><br><span class="line">                res = max(res, h * (i - <span class="built_in">stack</span>.back() - <span class="number">1</span>));</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">stack</span>.push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h1 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h1><ol>
<li>在有连续个值相同的元素时,中间会有多次错误计算,但并不影响连续元素中最后一次退栈的计算成为最大值.</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/12524826/why-should-i-use-deque-over-stack">JAVA-为什么用Deque去实现Stack?</a></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/12/30/LeetCode%20289.%20Game%20of%20Life/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Jichen Xu">
      <meta itemprop="description" content="一个程序员的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SoloQ">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/30/LeetCode%20289.%20Game%20of%20Life/" class="post-title-link" itemprop="url">LeetCode 289. Game of Life</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2020-12-30 17:00:00" itemprop="dateCreated datePublished" datetime="2020-12-30T17:00:00+09:00">2020-12-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-01-04 20:57:03" itemprop="dateModified" datetime="2021-01-04T20:57:03+09:00">2021-01-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/LeetCode-Notes/" itemprop="url" rel="index">
                    <span itemprop="name">LeetCode Notes</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/problems/game-of-life/">原题在此</a><br>According to Wikipedia’s article: “The Game of Life, also known simply as Life, is a cellular automaton devised by the British mathematician John Horton Conway in 1970.”</p>
<p>The board is made up of an m x n grid of cells, where each cell has an initial state: live (represented by a 1) or dead (represented by a 0). Each cell interacts with its eight neighbors (horizontal, vertical, diagonal) using the following four rules (taken from the above Wikipedia article):</p>
<p>Any live cell with fewer than two live neighbors dies as if caused by under-population.<br>Any live cell with two or three live neighbors lives on to the next generation.<br>Any live cell with more than three live neighbors dies, as if by over-population.<br>Any dead cell with exactly three live neighbors becomes a live cell, as if by reproduction.<br>The next state is created by applying the above rules simultaneously to every cell in the current state, where births and deaths occur simultaneously. Given the current state of the m x n grid board, return the next state.</p>
<p><strong>Example 1:</strong><br><img src="https://assets.leetcode.com/uploads/2020/12/26/grid1.jpg" alt=""></p>
<blockquote>
<p>Input: board = [[0,1,0],[0,0,1],[1,1,1],[0,0,0]]<br>Output: [[0,0,0],[1,0,1],[0,1,1],[0,1,0]]</p>
</blockquote>
<p><strong>Example 2:</strong><br><img src="https://assets.leetcode.com/uploads/2020/12/26/grid2.jpg" alt=""></p>
<blockquote>
<p>Input: board = [[1,1],[1,0]]<br>Output: [[1,1],[1,1]]</p>
</blockquote>
<p><strong>Constraints:</strong></p>
<ul>
<li>m == board.length</li>
<li>n == board[i].length</li>
<li>1 &lt;= m, n &lt;= 25</li>
<li>board[i][j] is 0 or 1.</li>
</ul>
<p><strong>Follow up:</strong></p>
<ul>
<li>Could you solve it in-place? Remember that the board needs to be updated simultaneously: You cannot update some cells first and then use their updated values to update other cells.</li>
<li>In this question, we represent the board using a 2D array. In principle, the board is infinite, which would cause problems when the active area encroaches upon the border of the array (i.e., live cells reach the border). How would you address these problems?<h1 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h1></li>
</ul>
<ol>
<li>题目用<code>vector&lt;vector&lt;int&gt;&gt;</code>做储存,而实际上每个格子只有死或生两种状态,只占用1bit. 所以可以将下一次演化的状态暂存在高位bit,待全部计算完毕后再位移回末位bit.<h1 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h1><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> &#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">gameOfLife</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;&gt;&amp; board)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> row = board.size(), col = board[<span class="number">0</span>].size();</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> r = <span class="number">0</span>; r &lt; row; ++r) &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> c = <span class="number">0</span>; c &lt; col; ++c) &#123;</span><br><span class="line">                <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> i=max(r<span class="number">-1</span>, <span class="number">0</span>); i&lt;min(r+<span class="number">2</span>, row); ++i)</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">int</span> j=max(c<span class="number">-1</span>, <span class="number">0</span>); j&lt;min(c+<span class="number">2</span>, col); ++j)</span><br><span class="line">                        count += board[i][j] &amp; <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span> (count == <span class="number">3</span> || count - board[r][c] == <span class="number">3</span>) board[r][c] |= <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; row; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; col; ++j)</span><br><span class="line">                board[i][j] &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Jichen Xu</p>
  <div class="site-description" itemprop="description">一个程序员的个人博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">24</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/solokyo/" title="GitHub" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="/mailto%EF%BC%9Akyokitisin@gmail.com" title="E-Mail"><i class="fa fa-fw fa-envelope"></i></a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        
<script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jichen Xu</span>
</div>
  <div class="powered-by">
	<i class="fa fa-user-md"></i>
	<span id="busuanzi_container_site_uv">
		本站访客数:
		<span id="busuanzi_value_site_uv"></span>
		<span class="post-meta-divider">|</span>
	</span>Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a>
  </div>

        








        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
